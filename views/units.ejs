<%- include("./partials/header.ejs") %>
    <%- include("./partials/nav.ejs") %>
        <div class="container-fluid py-4">
            <div class="row">
                <div class="col-lg-8 col-12">
                    <div class="card">
                        <div class="card-header p-3">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4 class="mb-0 font-weight-bolder text-dark text-gradient">Units on offer</h4>
                                    <span class="badge badge-info ms-auto">{{period}}</span>
                                </div>
                                <div class="col-md-6 d-flex justify-content-end align-items-center">
                                    <div class="dropdown d-inline">
                                        <a href="javascript:;" class="btn btn-sm btn-outline-dark dropdown-toggle"
                                            data-bs-toggle="dropdown" id="navbarDropdownMenuLink2"
                                            aria-expanded="false">
                                            Filters
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-lg-start px-2 py-3"
                                            aria-labelledby="navbarDropdownMenuLink2" style="">
                                            <li ng-repeat="s in periods"><a ng-click="periodFilter(s.name)"
                                                    class="dropdown-item border-radius-md"
                                                    href="javascript:;">{{s.name}}</a></li>
                                            <hr class="horizontal dark my-2">
                                            </li>
                                            <li><a ng-click="removeOfferedUnit()"
                                                    class="dropdown-item border-radius-md text-danger"
                                                    href="javascript:;">Remove Selected</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <hr class="horizontal dark mb-0">
                        </div>
                        <div class="card-body p-3 pt-0 table-responsive">
                            <div id="offered-units-table" hidden="">
                                <ul class="list-group list-group-flush rspv" data-toggle="checklist">
                                    <li ng-repeat="s in offeredUnits | filter: period | filter: mySearch"
                                        class="list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3">
                                        <div class="checklist-item checklist-item-info ps-2 ms-3">
                                            <div class="d-flex align-items-center">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        value="{{s.offeredunits._id}}" name="unitOfferedCheck"
                                                        id="unitOfferedCheck">
                                                </div>
                                                <h6 class="mb-0 text-dark font-weight-bold text-sm">{{s.units.code}}
                                                    {{s.units.name}}</h6>
                                                <div class="dropstart float-lg-end ms-auto pe-0">
                                                    <a href="javascript:;" class="cursor-pointer" id="dropdownTable1"
                                                        data-bs-toggle="dropdown" aria-expanded="false">
                                                        <i class="fa fa-ellipsis-h text-secondary"
                                                            aria-hidden="true"></i>
                                                    </a>
                                                    <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5"
                                                        aria-labelledby="dropdownTable1">
                                                        <li><a ng-click="attendanceQRCode(s.offeredunits._id, s.units.code, s.units.name)"
                                                                class="dropdown-item border-radius-md"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#modalAttendanceQRCode"
                                                                href="javascript:;">Attendance QR Code</a></li>
                                                        <li><a ng-click="unitAttendanceHistory(s.offeredunits._id, s.units.code, s.units.name, s.offeredunits.period)"
                                                                class="dropdown-item border-radius-md"
                                                                href="javascript:;">Attendance History</a></li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div
                                                class="d-flex justify-content-between align-items-center ms-4 mt-3 ps-1">
                                                <div>
                                                    <p class="text-xs mb-0 text-secondary font-weight-bold">Course</p>
                                                    <span class="text-xs font-weight-bolder">{{s.courses.code}}</span>
                                                </div>
                                                <div class="ms-auto">
                                                    <p class="text-xs mb-0 text-secondary font-weight-bold">Students</p>
                                                    <span
                                                        class="text-xs font-weight-bolder">{{s.offeredunits.students}}</span>
                                                </div>
                                                <div class="mx-auto">
                                                    <p class="text-xs mb-0 text-secondary font-weight-bold">Lecturer</p>
                                                    <span class="text-xs font-weight-bolder">{{s.users.title}}.
                                                        {{s.users.fname}}
                                                        {{s.users.lname}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-12 mt-4 mt-lg-0">
                    <div class="card">
                        <div class="card-header p-3 pb-0">
                            <div class="row">
                                <div class="col-8 d-flex">
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="font-weight-bolder text-dark text-gradient mb-0">
                                            Hey <%= user.fname %>!
                                        </h6>
                                        <p class="text-xs">
                                            <%= user.email %>
                                        </p>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <span class="badge bg-gradient-primary ms-auto float-end">
                                        <%= user.category %>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 pt-1">
                            <h6>I need a Ruby developer for my new website.</h6>
                            <p class="text-sm">The website was initially built in PHP, I need a professional ruby
                                programmer to shift it.</p>
                            <div class="d-flex bg-gray-100 border-radius-lg p-3">
                                <h4 class="my-auto">
                                    <span class="text-secondary text-sm me-1">Max</span>8<span
                                        class="text-secondary text-sm ms-1">/ sem </span>
                                </h4>
                                <a ng-click="applySelectedUnits()" id="btn-applySelectedUnits" href="javascript:;"
                                    class="btn bg-gradient-dark mb-0 ms-auto">Apply Selected</a>
                            </div>
                        </div>
                    </div>
                    <div class="card overflow-hidden mt-4">
                        <div class="card-body p-3">
                            <div class="row">
                                <div class="col-lg-5">
                                    <div class="d-flex">
                                        <div class="ms-3">
                                            <p
                                                class="text-sm mb-0 text-capitalize font-weight-bold text-dark text-gradient">
                                                Students</p>
                                            <h5 class="font-weight-bolder mb-0">
                                                115
                                            </h5>
                                        </div>
                                    </div>
                                    <span class="badge badge-dot d-block text-start pb-0 mt-3">
                                        <i class="bg-gradient-info"></i>
                                        <span class="text-muted text-xs font-weight-bold">Registered</span>
                                    </span>
                                    <span class="badge badge-dot d-block text-start">
                                        <i class="bg-gradient-secondary"></i>
                                        <span class="text-muted text-xs font-weight-bold">Unregistered</span>
                                    </span>
                                </div>
                                <div class="col-lg-7 my-auto">
                                    <div class="chart ms-auto">
                                        <canvas id="chart-bar" class="chart-canvas"
                                            style="display: block; box-sizing: border-box; height: 150px; width: 153.5px;"
                                            width="153" height="150"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-sm-flex justify-content-between mt-4">
                <div class="d-flex my-auto">
                    <div>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#modalUnit"
                            class="btn btn-icon bg-gradient-dark">
                            Add unit
                        </a>
                    </div>
                    <div>
                        <select ng-model="data_limit" id="data_limit" name="data_limit" class="form-control mx-3">
                            <option disabled>Page size</option>
                            <option selected="" value="10">10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>
                </div>
                <div class="d-flex">
                    <div class="dropdown d-inline">
                        <a href="javascript:;" class="btn btn-outline-dark dropdown-toggle" data-bs-toggle="dropdown"
                            id="navbarDropdownMenuLink2" aria-expanded="false">
                            Filters
                        </a>
                        <ul class="dropdown-menu dropdown-menu-lg-start px-2 py-3"
                            aria-labelledby="navbarDropdownMenuLink2">
                            <li ng-repeat="s in courses"><a ng-click="btnFilter(s.courses.code)"
                                    class="dropdown-item border-radius-md" href="javascript:;">{{s.courses.code}}</a>
                            </li>
                            <li>
                                <hr class="horizontal dark my-2">
                            </li>
                            <li><a ng-click="btnFilter(true)" class="dropdown-item border-radius-md"
                                    href="javascript:;">Status: Active</a></li>
                            <li><a ng-click="btnFilter(false)" class="dropdown-item border-radius-md"
                                    href="javascript:;">Status: Suspended</a></li>
                            <li>
                                <hr class="horizontal dark my-2">
                            </li>
                            <li><a ng-click="deleteUnits()" class="dropdown-item border-radius-md text-danger"
                                    href="javascript:;">Delete Selected</a></li>
                        </ul>
                    </div>
                    <button class="btn btn-icon btn-outline-dark ms-2 export" data-type="csv" type="button">
                        <span class="btn-inner--icon"><i class="ni ni-archive-2"></i></span>
                        <span class="btn-inner--text">Export CSV</span>
                    </button>
                </div>
            </div>

            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="font-weight-bolder text-dark text-gradient">Units</h4>
                            <p class="text-sm">
                                This is a list of all of the units that are available in a given course.
                            </p>
                        </div>
                        <div class="dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns">
                            <div class="dataTable-container table-responsive">
                                <table class="table table-hover table-flush dataTable-table" id="units-table" hidden="">
                                    <thead class="thead-light">
                                        <tr>
                                            <th data-sortable="" style="width: 20.9375%;"><a
                                                    ng-click="sort_with('code');" href="#"
                                                    class="dataTable-sorter">Code</a></th>
                                            <th data-sortable="" style="width: 27.6563%;"><a
                                                    ng-click="sort_with('name');" href="#" class="dataTable-sorter">Unit
                                                    Name</a></th>
                                            <th data-sortable="" style="width: 20.9375%;"><a
                                                    ng-click="sort_with('lecturer');" href="#"
                                                    class="dataTable-sorter">Lecturer</a></th>
                                            <th data-sortable="" style="width: 320.9375%;"><a
                                                    ng-click="sort_with('session');" href="#"
                                                    class="dataTable-sorter">Session</a></th>
                                            <th data-sortable="" style="width: 20.9375%;"><a
                                                    ng-click="sort_with('lecturer');" href="#"
                                                    class="dataTable-sorter">Faculty</a></th>
                                            <th style="width: 20.2813%;"><a href="#">Update</a></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr
                                            ng-repeat="s in searched = (units | filter:mySearch | orderBy : base :reverse) | beginning_data:(current_grid-1)*data_limit | limitTo:data_limit">
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <div class="form-check">
                                                        <input ng-disabled="s.units.status === false"
                                                            class="form-check-input" type="checkbox"
                                                            value="{{s.units._id}}" name="unitCheck" id="unitCheck">
                                                    </div>
                                                    <p class="text-xs font-weight-bold ms-2 mb-0">{{s.units.code}}
                                                    </p>
                                                </div>
                                            </td>
                                            <td class="text-xs font-weight-bold">
                                                <div class="d-flex align-items-center">
                                                    <div class="d-flex align-items-center">
                                                        <div ng-show="(s.units.name | limitTo: 1) == 'A' || (s.units.name | limitTo: 1) == 'B' || (s.units.name | limitTo: 1) == 'G' || (s.units.name | limitTo: 1) == 'M' || (s.units.name | limitTo: 1) == 'E' || (s.units.name | limitTo: 1) == 'F'"
                                                            class="avatar avatar-xs me-2 bg-gradient-dark">
                                                            <span>{{s.units.name | limitTo: 1}}</span>
                                                        </div>
                                                        <div ng-show="(s.units.name | limitTo: 1) == 'C' || (s.units.name | limitTo: 1) == 'H' || (s.units.name | limitTo: 1) == 'I' || (s.units.name | limitTo: 1) == 'J' || (s.units.name | limitTo: 1) == 'K' || (s.units.name | limitTo: 1) == 'L'"
                                                            class="avatar avatar-xs me-2 bg-gradient-primary">
                                                            <span>{{s.units.name | limitTo: 1}}</span>
                                                        </div>
                                                        <div ng-show="(s.units.name | limitTo: 1) == 'D' || (s.units.name | limitTo: 1) == 'N' || (s.units.name | limitTo: 1) == 'O' || (s.units.name | limitTo: 1) == 'P' || (s.units.name | limitTo: 1) == 'Q' || (s.units.name | limitTo: 1) == 'R' || (s.units.name | limitTo: 1) == 'Z'"
                                                            class="avatar avatar-xs me-2 bg-gradient-info">
                                                            <span>{{s.units.name | limitTo: 1}}</span>
                                                        </div>
                                                        <div ng-show="(s.units.name | limitTo: 1) == 'S' || (s.units.name | limitTo: 1) == 'T' || (s.units.name | limitTo: 1) == 'U' || (s.units.name | limitTo: 1) == 'V' || (s.units.name | limitTo: 1) == 'W' || (s.units.name | limitTo: 1) == 'X' || (s.units.name | limitTo: 1) == 'Y'"
                                                            class="avatar avatar-xs me-2 bg-gradient-success">
                                                            <span>{{s.units.name | limitTo: 1}}</span>
                                                        </div>
                                                        <div class="flex-column">
                                                            <h6 class="text-xs">{{s.units.name}}</h6>
                                                            <p class="text-xs text-secondary mb-0">
                                                                {{s.courses.code}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="text-xs font-weight-bold">
                                                <span class="my-2 text-xs">
                                                    {{s.users.title}}. {{s.users.fname}} {{s.users.lname}}
                                                </span>
                                            </td>
                                            <td>
                                                <span class="my-2 text-xs">
                                                    <span class="badge badge-dot me-4">
                                                        <i ng-show="s.units.status === true" class="bg-success"></i>
                                                        <i ng-show="s.units.status === false" class="bg-danger"></i>
                                                        <span class="text-dark text-xs">{{s.units.session}}</span>
                                                    </span> </span>
                                            </td>
                                            <td class="text-xs font-weight-bold">
                                                <span ng-repeat="c in courses | filter: s.courses._id"
                                                    class="my-2 text-xs">
                                                    {{c.faculties.code}}
                                                </span>
                                            </td>
                                            <td class="text-xs font-weight-bold">
                                                <div class="d-flex align-items-center">
                                                    <button
                                                        ng-click="updateUnit(s.units._id, s.units.code, s.units.name, s.courses._id, s.units.session, s.users._id, s.units.status)"
                                                        class="btn btn-icon-only btn-rounded btn-outline-info mb-0 me-2 btn-sm d-flex align-items-center justify-content-center"><i
                                                            class="fa-solid fa-rotate" aria-hidden="true"></i></button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="dataTable-bottom">
                                <div class="dataTable-info">Showing {{ searched.length }} of {{ units.length}}
                                    entries</div>
                                <nav class="dataTable-pagination">
                                    <div pagination="" page="current_grid" on-select-page="page_position(page)"
                                        total-items="units.length" items-per-page="data_limit" max-size="3"
                                        class="dataTable-pagination-list font-weight-bold" previous-text="‹"
                                        next-text="›"></div>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer py-5">
                <div class="container">
                    <div class="row">
                        <div class="col-8 mx-auto text-center mt-1">
                            <small class="mb-0 text-secondary">
                                Copyright
                                <script>
                                    document.write(new Date().getFullYear())
                                </script> &copy; All rights reserved
                            </small>
                        </div>
                    </div>
                </div>
            </footer>
        </div>

        <!--unit attendance history-->
        <div class="modal fade" id="modalUnitAttendanceHistory" tabindex="-1" role="dialog"
            aria-labelledby="modalUnitAttendanceHistory" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered " role="document">
                <div class="modal-content">
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-header pb-0 text-left">
                                <h4 class="font-weight-bolder text-dark text-gradient">Unit attendance - {{unitPeriod}}
                                </h4>
                                <small>{{unitCode}} {{unitName}}</small>
                            </div>
                            <div class="card-body px-0 pb-3">
                                <div
                                    class="dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns">
                                    <div class="dataTable-container">
                                        <table class="table table-hover table-flush dataTable-table table-responsive">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th style="width: 10.9375%;">Student</th>
                                                    <th ng-repeat="s in dates">{{s}}</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr
                                                    ng-repeat="s in stds | beginning_data:(current_grid-1)*data_limit | limitTo:data_limit">
                                                    <td>
                                                        <div class="d-flex align-items-center">
                                                            <div class="form-check">
                                                                <input class="form-check-input"
                                                                    value="{{s.attendancerecords._id}}" type="checkbox"
                                                                    name="attendanceCheck" id="attendanceCheck">
                                                            </div>
                                                            <a ng-click="fetchUnitAttendance(s.attendancerecords._id, s.units.code, s.units.name, s.attendancerecords.createdAt)"
                                                                class="text-xs font-weight-bold" href="#">
                                                                <div class="d-flex align-items-center">
                                                                    <div ng-show="(s[0].students.fname | limitTo: 1) == 'A' || (s[0].students.fname | limitTo: 1) == 'B' || (s[0].students.fname | limitTo: 1) == 'C' || (s[0].students.fname | limitTo: 1) == 'D' || (s[0].students.fname | limitTo: 1) == 'E' || (s[0].students.fname | limitTo: 1) == 'F'"
                                                                        class="avatar avatar-xs me-2 bg-gradient-dark">
                                                                        <span>{{s[0].students.fname | limitTo:
                                                                            1}}</span>
                                                                    </div>
                                                                    <div ng-show="(s[0].students.fname | limitTo: 1) == 'G' || (s[0].students.fname | limitTo: 1) == 'H' || (s[0].students.fname | limitTo: 1) == 'I' || (s[0].students.fname | limitTo: 1) == 'J' || (s[0].students.fname | limitTo: 1) == 'K' || (s[0].students.fname | limitTo: 1) == 'L'"
                                                                        class="avatar avatar-xs me-2 bg-gradient-primary">
                                                                        <span>{{s[0].students.fname | limitTo:
                                                                            1}}</span>
                                                                    </div>
                                                                    <div ng-show="(s[0].students.fname | limitTo: 1) == 'M' || (s[0].students.fname | limitTo: 1) == 'N' || (s[0].students.fname | limitTo: 1) == 'O' || (s[0].students.fname | limitTo: 1) == 'P' || (s[0].students.fname | limitTo: 1) == 'Q' || (s[0].students.fname | limitTo: 1) == 'R' || (s[0].students.fname | limitTo: 1) == 'Z'"
                                                                        class="avatar avatar-xs me-2 bg-gradient-info">
                                                                        <span>{{s[0].students.fname | limitTo:
                                                                            1}}</span>
                                                                    </div>
                                                                    <div ng-show="(s[0].students.fname | limitTo: 1) == 'S' || (s[0].students.fname | limitTo: 1) == 'T' || (s[0].students.fname | limitTo: 1) == 'U' || (s[0].students.fname | limitTo: 1) == 'V' || (s[0].students.fname | limitTo: 1) == 'W' || (s[0].students.fname | limitTo: 1) == 'X' || (s[0].students.fname | limitTo: 1) == 'Y'"
                                                                        class="avatar avatar-xs me-2 bg-gradient-success">
                                                                        <span>{{s[0].students.fname | limitTo:
                                                                            1}}</span>
                                                                    </div>
                                                                    <div class="flex-column">
                                                                        <h6 class="text-xs">{{s[0].students.fname}}
                                                                            {{s[0].students.mname}}
                                                                            {{s[0].students.lname}}
                                                                        </h6>
                                                                        <p class="text-xs text-secondary mb-0">
                                                                            {{s[0].students.email}}</p>
                                                                    </div>
                                                                </div>
                                                            </a>
                                                        </div>
                                                    </td>
                                                    <td ng-repeat="d in stds[$index]" class="text-xs font-weight-bold">
                                                        <span ng-show="d.attendancedetails.status === true"
                                                            class="badge badge-success badge-sm text-xs">Verified</span>
                                                        <span ng-show="d.attendancedetails.status === false"
                                                            class="badge badge-danger badge-sm text-xs">Absent</span>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <thead class="thead-light">
                                                <tr>
                                                    <th style="width: 10.9375%;">Student</th>
                                                    <th ng-repeat="s in dates">Week
                                                        {{$index+1}}</th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                    <div class="dataTable-bottom">
                                        <div class="dataTable-info">Showing {{ stds.length }} of {{ stds.length}}
                                            entries</div>
                                        <nav class="dataTable-pagination">
                                            <div pagination="" page="current_grid" on-select-page="page_position(page)"
                                                total-items="stds.length" items-per-page="data_limit" max-size="3"
                                                class="dataTable-pagination-list font-weight-bold" previous-text="‹"
                                                next-text="›"></div>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer text-secondary pt-0 px-sm-4 px-1">
                                <small style="font-size: 13px;">&copy; By using this website, you agree to be bound by,
                                    <a href="#" class="text-primary text-gradient" data-container="body"
                                        data-bs-toggle="popover" data-bs-placement="left"
                                        data-bs-content="
                                            1. Acceptance of Terms and Conditions. These terms and conditions (“Terms and Conditions”) govern your use of this website, including all pages within this website (collectively referred to herein below as this “Website”). These Terms & Conditions are binding and enforceable against all persons that access this Website. By accessing this Website, you acknowledge that you have read, understand, and agree, without limitation or qualification, to be bound by these Terms and Conditions.
                                            2. Modification of Terms and Conditions. We reserve the right to change these Terms and Conditions at any time. Such changes, modifications, additions or deletions shall be effective immediately upon notice thereof, which may be given by means including, but not limited to, posting on this Website. Any use of this Website by you after such notice shall be deemed to constitute acceptance by you of such changes, modifications or additions.
                                            3. Use of Website. This Website is owned and operated by us. You may not copy, reproduce" data-container="body"
                                        data-animation="true">Terms & Conditions</a> set forth. If
                                    you do not agree with
                                    any of these Terms & Conditions, please do not use this website.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--attendance QR code-->
        <div class="modal fade" id="modalAttendanceQRCode" tabindex="-1" role="dialog"
            aria-labelledby="modalAttendanceQRCode" aria-hidden="true">
            <div class="modal-dialog modal-sm modal-dialog-centered " role="document">
                <div class="modal-content">
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-header pb-0 text-left">
                                <h4 class="font-weight-bolder text-dark text-gradient">Attendance QR Code</h4>
                                <small>{{unitCode}} {{unitName}}</small>
                            </div>
                            <div class="card-body pb-3">
                                <div class="position-relative d-flex align-items-center justify-content-center h-100">
                                    <span id='QRSpinner' style="font-size: 100px;"><i
                                            class="fa-solid fa-sync fa-spin"></i></span>
                                    <img id='QRCode' class="w-100 position-relative z-index-2" hidden=""
                                        src="{{QRCodeURL}}" alt="QRCodeURL">
                                </div>
                            </div>
                            <div class="card-footer text-center pt-0 px-sm-4 px-1">
                                <p class="text-center text-sm">Student(s) to scan the QR Code for attendance
                                    verification</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modalUnit" tabindex="-1" role="dialog" aria-labelledby="modalUnit"
            aria-hidden="true">
            <div class="modal-dialog modal- modal-dialog-centered " role="document">
                <div class="modal-content">
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-header pb-0 text-left">
                                <h4 class="font-weight-bolder text-dark text-gradient">{{title}} unit</h4>
                                <small>Enter the course unit information into the appropriate fields.</small>
                            </div>
                            <div class="card-body pb-3">
                                <form id="unitForm" name="unitForm" role="form text-left" novalidate>
                                    <div class="row">
                                        <div class="col-12 col-sm-4">
                                            <label>Unit Code</label>
                                            <input ng-model="code" id="code" name="code" class="form-control"
                                                type="text" placeholder="Enter Code" autofocus="on"
                                                onfocus="focused(this)" onfocusout="defocused(this)" required>
                                        </div>
                                        <div class="col-12 col-sm-8">
                                            <label>Unit Name</label>
                                            <input ng-model="name" id="name" name="name" class="form-control validate"
                                                type="text" placeholder="Enter Name" onfocus="focused(this)"
                                                onfocusout="defocused(this)" required>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12 col-sm-12">
                                            <label>Unit Course</label>
                                            <select ng-model="course" class="form-control validate" name="course"
                                                id="course" placeholder="Course" required>
                                                <option ng-repeat="s in courses" value="{{s.courses._id}}">
                                                    {{s.courses.name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12 col-sm-6">
                                            <label>Unit Session</label>
                                            <select ng-model="session" class="form-control validate" name="session"
                                                id="session" placeholder="Unit Session" required>
                                                <option value="1st Year 1st Sem">1st Year 1st Sem</option>
                                                <option value="1st Year 2nd Sem">1st Year 2nd Sem</option>
                                                <option value="2nd Year 1st Sem">2nd Year 1st Sem</option>
                                                <option value="2nd Year 2nd Sem">2nd Year 2nd Sem</option>
                                                <option value="3rd Year 1st Sem">3rd Year 1st Sem</option>
                                                <option value="3rd Year 2nd Sem">3rd Year 2nd Sem</option>
                                                <option value="4th Year 1st Sem">4th Year 1st Sem</option>
                                                <option value="4th Year 2nd Sem">4th Year 2nd Sem</option>
                                            </select>
                                        </div>
                                        <div class="col-12 col-sm-6">
                                            <label>Unit Lecturer</label>
                                            <select ng-model="lecturer" class="form-control validate" name="lecturer"
                                                id="lecturer" placeholder="Lecturer" required>
                                                <option ng-repeat="s in users | filter: 'Lecturer'" value="{{s._id}}">
                                                    {{s.title}}. {{s.fname}} {{s.lname}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12 col-sm-7">
                                            <label>Unit Status</label>
                                            <div class="form-check form-switch ms-2">
                                                <input ng-model="status" class="form-check-input" type="checkbox"
                                                    id="status">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="button-row mt-4">
                                        <button ng-click="saveUnit()"
                                            ng-disabled="unitForm.code.$invalid || unitForm.name.$invalid || unitForm.course.$invalid  || unitForm.session.$invalid || unitForm.lecturer.$invalid"
                                            id="btn-saveUnit" class="btn bg-gradient-primary ms-auto mb-0"
                                            type="submit">Submit</button>
                                    </div>
                                </form>
                            </div>
                            <div class="card-footer text-secondary pt-0 px-sm-4 px-1">
                                <small style="font-size: 13px;">&copy; By using this website, you agree to be bound by,
                                    <a href="#" class="text-primary text-gradient" data-container="body"
                                        data-bs-toggle="popover" data-bs-placement="left"
                                        data-bs-content="
                                            1. Acceptance of Terms and Conditions. These terms and conditions (“Terms and Conditions”) govern your use of this website, including all pages within this website (collectively referred to herein below as this “Website”). These Terms & Conditions are binding and enforceable against all persons that access this Website. By accessing this Website, you acknowledge that you have read, understand, and agree, without limitation or qualification, to be bound by these Terms and Conditions.
                                            2. Modification of Terms and Conditions. We reserve the right to change these Terms and Conditions at any time. Such changes, modifications, additions or deletions shall be effective immediately upon notice thereof, which may be given by means including, but not limited to, posting on this Website. Any use of this Website by you after such notice shall be deemed to constitute acceptance by you of such changes, modifications or additions.
                                            3. Use of Website. This Website is owned and operated by us. You may not copy, reproduce" data-container="body"
                                        data-animation="true">Terms & Conditions</a> set forth. If
                                    you do not agree with
                                    any of these Terms & Conditions, please do not use this website.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <%- include("./partials/footer.ejs") %>

            <script>
                //if (document.getElementById('type')) {
                //    var element = document.getElementById('type');
                //    const example = new Choices(element, {});
                //}
                //if (document.getElementById('session')) {
                //    var element = document.getElementById('session');
                //    const example = new Choices(element, {});
                //}
                //if (document.getElementById('status')) {
                //    var element = document.getElementById('status');
                //    const example = new Choices(element, {});
                //}
            </script>

            <script>
                var ctx2 = document.getElementById("chart-bar").getContext("2d");

                new Chart(ctx2, {
                    type: "doughnut",
                    data: {
                        labels: ['Registered', 'Unregistered'],
                        datasets: [{
                            label: "Students",
                            weight: 9,
                            cutout: 50,
                            tension: 0.9,
                            pointRadius: 2,
                            borderWidth: 2,
                            backgroundColor: ['#17c1e8', '#a8b8d8'],
                            data: [75, 25],
                            fill: false
                        }],
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false,
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index',
                        },
                        scales: {
                            y: {
                                grid: {
                                    drawBorder: false,
                                    display: false,
                                    drawOnChartArea: false,
                                    drawTicks: false,
                                },
                                ticks: {
                                    display: false
                                }
                            },
                            x: {
                                grid: {
                                    drawBorder: false,
                                    display: false,
                                    drawOnChartArea: false,
                                    drawTicks: false,
                                },
                                ticks: {
                                    display: false,
                                }
                            },
                        },
                    },
                });
            </script>