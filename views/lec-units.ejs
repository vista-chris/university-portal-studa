<%- include("./partials/header.ejs") %>
    <%- include("./partials/nav.ejs") %>
        <div class="container-fluid py-4">
            <div class="d-sm-flex justify-content-between">
                <div>
                    <a href="#" data-bs-toggle="modal" data-bs-target="#modalUnit"
                        class="btn btn-icon bg-gradient-dark">
                        Add unit
                    </a>
                </div>
                <div class="d-flex">
                    <div class="dropdown d-inline">
                        <a href="javascript:;" class="btn btn-outline-dark dropdown-toggle" data-bs-toggle="dropdown"
                            id="navbarDropdownMenuLink2" aria-expanded="false">
                            Filters
                        </a>
                        <ul class="dropdown-menu dropdown-menu-lg-start px-2 py-3"
                            aria-labelledby="navbarDropdownMenuLink2" style="">
                            <li><a ng-click="btnFilter('1')" class="dropdown-item border-radius-md"
                                    href="javascript:;">Status: Active</a></li>
                            <li><a ng-click="btnFilter('0')" class="dropdown-item border-radius-md"
                                    href="javascript:;">Status: Suspended</a></li>
                            <li>
                                <hr class="horizontal dark my-2">
                            </li>
                            <li><a ng-click="deleteUnits()" class="dropdown-item border-radius-md text-danger"
                                    href="javascript:;">Delete Selected</a></li>
                        </ul>
                    </div>
                    <button class="btn btn-icon btn-outline-dark ms-2 export" data-type="csv" type="button">
                        <span class="btn-inner--icon"><i class="ni ni-archive-2"></i></span>
                        <span class="btn-inner--text">Export CSV</span>
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-8 col-12">
                    <div class="card">
                        <div class="card-header p-3">
                            <div class="row">
                                <div class="col-md-6">
                                    <h6 class="mb-0">To do list</h6>
                                </div>
                                <div class="col-md-6 d-flex justify-content-end align-items-center">
                                    <small>23 - 30 March 2020</small>
                                </div>
                            </div>
                            <hr class="horizontal dark mb-0">
                        </div>
                        <div class="card-body p-3 pt-0">
                            <ul class="list-group list-group-flush" data-toggle="checklist">
                                <li class="list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3">
                                    <div class="checklist-item checklist-item-primary ps-2 ms-3">
                                        <div class="d-flex align-items-center">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault">
                                            </div>
                                            <h6 class="mb-0 text-dark font-weight-bold text-sm">Check status</h6>
                                            <div class="dropstart float-lg-end ms-auto pe-0">
                                                <a href="javascript:;" class="cursor-pointer" id="dropdownTable2"
                                                    data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="fa fa-ellipsis-h text-secondary" aria-hidden="true"></i>
                                                </a>
                                                <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5"
                                                    aria-labelledby="dropdownTable2" style="">
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Another action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Something else here</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="d-flex align-items-center ms-4 mt-3 ps-1">
                                            <div>
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Date</p>
                                                <span class="text-xs font-weight-bolder">24 March 2019</span>
                                            </div>
                                            <div class="ms-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Project</p>
                                                <span class="text-xs font-weight-bolder">2414_VR4sf3#</span>
                                            </div>
                                            <div class="mx-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Company</p>
                                                <span class="text-xs font-weight-bolder">Creative Tim</span>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="horizontal dark mt-4 mb-0">
                                </li>
                                <li class="list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3">
                                    <div class="checklist-item checklist-item-dark ps-2 ms-3">
                                        <div class="d-flex align-items-center">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault1" checked="">
                                            </div>
                                            <h6 class="mb-0 text-dark font-weight-bold text-sm">Management discussion
                                            </h6>
                                            <div class="dropstart float-lg-end ms-auto pe-0">
                                                <a href="javascript:;" class="cursor-pointer" id="dropdownTable3"
                                                    data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="fa fa-ellipsis-h text-secondary" aria-hidden="true"></i>
                                                </a>
                                                <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5"
                                                    aria-labelledby="dropdownTable3" style="">
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Another action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Something else here</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center ms-4 mt-3 ps-1">
                                            <div>
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Date</p>
                                                <span class="text-xs font-weight-bolder">24 March 2019</span>
                                            </div>
                                            <div class="ms-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Project</p>
                                                <span class="text-xs font-weight-bolder">4411_8sIsdd23</span>
                                            </div>
                                            <div class="mx-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Company</p>
                                                <span class="text-xs font-weight-bolder">Apple</span>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="horizontal dark mt-4 mb-0">
                                </li>
                                <li class="list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3">
                                    <div class="checklist-item checklist-item-warning ps-2 ms-3">
                                        <div class="d-flex align-items-center">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault2" checked="">
                                            </div>
                                            <h6 class="mb-0 text-dark font-weight-bold text-sm">New channel distribution
                                            </h6>
                                            <div class="dropstart float-lg-end ms-auto pe-0">
                                                <a href="javascript:;" class="cursor-pointer" id="dropdownTable"
                                                    data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="fa fa-ellipsis-h text-secondary" aria-hidden="true"></i>
                                                </a>
                                                <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5"
                                                    aria-labelledby="dropdownTable" style="">
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Another action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Something else here</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center ms-4 mt-3 ps-1">
                                            <div>
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Date</p>
                                                <span class="text-xs font-weight-bolder">25 March 2019</span>
                                            </div>
                                            <div class="ms-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Project</p>
                                                <span class="text-xs font-weight-bolder">827d_kdl33D1s</span>
                                            </div>
                                            <div class="mx-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Company</p>
                                                <span class="text-xs font-weight-bolder">Slack</span>
                                            </div>
                                        </div>
                                    </div>
                                    <hr class="horizontal dark mt-4 mb-0">
                                </li>
                                <li class="list-group-item border-0 flex-column align-items-start ps-0 py-0 mb-3">
                                    <div class="checklist-item checklist-item-success ps-2 ms-3">
                                        <div class="d-flex align-items-center">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value=""
                                                    id="flexCheckDefault3">
                                            </div>
                                            <h6 class="mb-0 text-dark font-weight-bold text-sm">IOS App development</h6>
                                            <div class="dropstart float-lg-end ms-auto pe-0">
                                                <a href="javascript:;" class="cursor-pointer" id="dropdownTable1"
                                                    data-bs-toggle="dropdown" aria-expanded="false">
                                                    <i class="fa fa-ellipsis-h text-secondary" aria-hidden="true"></i>
                                                </a>
                                                <ul class="dropdown-menu px-2 py-3 ms-sm-n4 ms-n5"
                                                    aria-labelledby="dropdownTable1" style="">
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Another action</a></li>
                                                    <li><a class="dropdown-item border-radius-md"
                                                            href="javascript:;">Something else here</a></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center ms-4 mt-3 ps-1">
                                            <div>
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Date</p>
                                                <span class="text-xs font-weight-bolder">26 March 2019</span>
                                            </div>
                                            <div class="ms-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Project</p>
                                                <span class="text-xs font-weight-bolder">88s1_349DA2sa</span>
                                            </div>
                                            <div class="mx-auto">
                                                <p class="text-xs mb-0 text-secondary font-weight-bold">Company</p>
                                                <span class="text-xs font-weight-bolder">Facebook</span>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-12 mt-4 mt-lg-0">
                    <div class="card">
                        <div class="card-header p-3 pb-0">
                            <div class="row">
                                <div class="col-8 d-flex">
                                    <div>
                                        <img src="/assets/img/user.jpg" class="avatar avatar-sm me-2"
                                            alt="avatar image">
                                    </div>
                                    <div class="d-flex flex-column justify-content-center">
                                        <h6 class="mb-0 text-sm">
                                            <%= user.fname %>
                                                <%= user.lname %>
                                        </h6>
                                        <p class="text-xs">2h ago</p>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <span class="badge bg-gradient-info ms-auto float-end">
                                        <%= user.category %>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-3 pt-1">
                            <h6>I need a Ruby developer for my new website.</h6>
                            <p class="text-sm">The website was initially built in PHP, I need a professional ruby
                                programmer to shift it.</p>
                            <div class="d-flex bg-gray-100 border-radius-lg p-3">
                                <h4 class="my-auto">
                                    <span class="text-secondary text-sm me-1">$</span>3,000<span
                                        class="text-secondary text-sm ms-1">/ month </span>
                                </h4>
                                <a href="javascript:;" class="btn btn-outline-dark mb-0 ms-auto">Apply</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="font-weight-bolder">Units</h4>
                            <p class="text-sm mb-0">
                                A lightweight, extendable, dependency-free javascript HTML table plugin.
                            </p>
                        </div>
                        <div class="table-responsive">
                            <div
                                class="dataTable-wrapper dataTable-loading no-footer sortable searchable fixed-columns">
                                <div class="dataTable-container">
                                    <table class="table table-hover table-flush dataTable-table" id="datatable-search">
                                        <thead class="thead-light">
                                            <tr>
                                                <th data-sortable="" style="width: 20.9375%;"><a href="#"
                                                        class="dataTable-sorter">Code</a></th>
                                                <th data-sortable="" style="width: 23.2813%;"><a href="#"
                                                        class="dataTable-sorter">Lecturer</a></th>
                                                <th data-sortable="" style="width: 22.8125%;" class="desc"><a href="#"
                                                        class="dataTable-sorter">Status</a></th>
                                                <th data-sortable="" style="width: 27.6563%;"><a href="#"
                                                        class="dataTable-sorter">Unit Name</a></th>
                                                <th data-sortable="" style="width: 30.9375%;"><a href="#"
                                                        class="dataTable-sorter">Session</a></th>
                                                <th data-sortable="" style="width: 23.2813%;"><a href="#"
                                                        class="dataTable-sorter">Course</a></th>
                                                <th data-sortable="" style="width: 23.2813%;"><a href="#"
                                                        class="dataTable-sorter">Update</a></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="s in units | filter:mySearch">
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox"
                                                                value="{{s.units._id}}" name="unitCheck" id="unitCheck">
                                                        </div>
                                                        <p class="text-xs font-weight-bold ms-2 mb-0">#{{s.units.code}}
                                                        </p>
                                                    </div>
                                                </td>
                                                <td class="font-weight-bold">
                                                    <span class="my-2 text-xs">{{s.users._id}}</span>
                                                </td>
                                                <td class="text-xs font-weight-bold">
                                                    <span ng-show="s.units.status == '1'" class="badge badge-dot me-4">
                                                        <i class="bg-success"></i>
                                                        <span class="text-dark text-xs">Active</span>
                                                    </span>
                                                    <span ng-show="s.units.status == '0'" class="badge badge-dot me-4">
                                                        <i class="bg-danger"></i>
                                                        <span class="text-dark text-xs">Suspended</span>
                                                    </span>
                                                </td>
                                                <td class="text-xs font-weight-bold">
                                                    <div class="d-flex align-items-center">
                                                        <div class="d-flex align-items-center">
                                                            <div ng-show="(s.units.name | limitTo: 1) == 'A' || (s.units.name | limitTo: 1) == 'B' || (s.units.name | limitTo: 1) == 'G' || (s.units.name | limitTo: 1) == 'M' || (s.units.name | limitTo: 1) == 'E' || (s.units.name | limitTo: 1) == 'F'"
                                                                class="avatar avatar-xs me-2 bg-gradient-dark">
                                                                <span>{{s.units.name | limitTo: 1}}</span>
                                                            </div>
                                                            <div ng-show="(s.units.name | limitTo: 1) == 'C' || (s.units.name | limitTo: 1) == 'H' || (s.units.name | limitTo: 1) == 'I' || (s.units.name | limitTo: 1) == 'J' || (s.units.name | limitTo: 1) == 'K' || (s.units.name | limitTo: 1) == 'L'"
                                                                class="avatar avatar-xs me-2 bg-gradient-primary">
                                                                <span>{{s.units.name | limitTo: 1}}</span>
                                                            </div>
                                                            <div ng-show="(s.units.name | limitTo: 1) == 'D' || (s.units.name | limitTo: 1) == 'N' || (s.units.name | limitTo: 1) == 'O' || (s.units.name | limitTo: 1) == 'P' || (s.units.name | limitTo: 1) == 'Q' || (s.units.name | limitTo: 1) == 'R' || (s.units.name | limitTo: 1) == 'Z'"
                                                                class="avatar avatar-xs me-2 bg-gradient-info">
                                                                <span>{{s.units.name | limitTo: 1}}</span>
                                                            </div>
                                                            <div ng-show="(s.units.name | limitTo: 1) == 'S' || (s.units.name | limitTo: 1) == 'T' || (s.units.name | limitTo: 1) == 'U' || (s.units.name | limitTo: 1) == 'V' || (s.units.name | limitTo: 1) == 'W' || (s.units.name | limitTo: 1) == 'X' || (s.units.name | limitTo: 1) == 'Y'"
                                                                class="avatar avatar-xs me-2 bg-gradient-success">
                                                                <span>{{s.units.name | limitTo: 1}}</span>
                                                            </div>
                                                            <span>{{s.units.name}}</span>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="text-xs font-weight-bold">
                                                    <span class="my-2 text-xs">
                                                        {{s.units.session}}
                                                    </span>
                                                </td>
                                                <td class="font-weight-bold">
                                                    <span class="my-2 text-xs">{{s.courses.name}}</span>
                                                </td>
                                                <td class="text-xs font-weight-bold">
                                                    <div class="d-flex align-items-center">
                                                        <button
                                                            ng-click="updateUnit(s.units._id, s.units.code, s.units.name, s.courses._id, s.units.session, s.users._id, s.units.status)"
                                                            class="btn btn-icon-only btn-rounded btn-outline-info mb-0 me-2 btn-sm d-flex align-items-center justify-content-center"><i
                                                                class="fa-solid fa-rotate"
                                                                aria-hidden="true"></i></button>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="dataTable-bottom">
                                    <div class="dataTable-info">Showing 1 to 10 of 12 entries</div>
                                    <nav class="dataTable-pagination">
                                        <ul class="dataTable-pagination-list">
                                            <li class="pager"><a href="#" data-page="1">‹</a></li>
                                            <li class="active"><a href="#" data-page="1">1</a></li>
                                            <li class=""><a href="#" data-page="2">2</a></li>
                                            <li class="pager"><a href="#" data-page="2">›</a></li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer py-5">
                <div class="container">
                    <div class="row">
                        <div class="col-8 mx-auto text-center mt-1">
                            <small class="mb-0 text-secondary">
                                Copyright
                                <script>
                                    document.write(new Date().getFullYear())
                                </script> &copy; All rights reserved
                            </small>
                        </div>
                    </div>
                </div>
            </footer>
        </div>

        <div class="modal fade" id="modalUnit" tabindex="-1" role="dialog" aria-labelledby="modalUnit"
            aria-hidden="true">
            <div class="modal-dialog modal- modal-dialog-centered " role="document">
                <div class="modal-content">
                    <div class="modal-body p-0">
                        <div class="card card-plain">
                            <div class="card-header pb-0 text-left">
                                <h4 class="font-weight-bolder">{{title}} unit</h4>
                                <small>This is the paragraph where you can write your projects.</small>
                            </div>
                            <div class="card-body pb-3">
                                <form id="unitForm" name="unitForm" role="form text-left" novalidate>
                                    <div class="row mt-3">
                                        <div class="col-12 col-sm-4">
                                            <label>Unit Code</label>
                                            <input ng-model="code" id="code" name="code" class="form-control"
                                                type="text" placeholder="Enter Code" autofocus="on"
                                                onfocus="focused(this)" onfocusout="defocused(this)" required>
                                        </div>
                                        <div class="col-12 col-sm-8">
                                            <label>Unit Name</label>
                                            <input ng-model="name" id="name" name="name" class="form-control validate"
                                                type="text" placeholder="Enter Name" onfocus="focused(this)"
                                                onfocusout="defocused(this)" required>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12 col-sm-12">
                                            <label>Unit Course</label>
                                            <select ng-model="course" class="form-control validate" name="course"
                                                id="course" placeholder="Course" required>
                                                <option ng-repeat="s in courses" value="{{s._id}}">{{s.name}}</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12 col-sm-12">
                                            <label>Unit Session</label>
                                            <select ng-model="session" class="form-control validate" name="session"
                                                id="session" placeholder="Unit Session" required>
                                                <option value="" selected="" disabled>Unit Session</option>
                                                <option value="1st Year 1st Sem">1st Year 1st Sem</option>
                                                <option value="1st Year 2nd Sem">1st Year 2nd Sem</option>
                                                <option value="2nd Year 1st Sem">2nd Year 1st Sem</option>
                                                <option value="2nd Year 2nd Sem">2nd Year 2nd Sem</option>
                                                <option value="3rd Year 1st Sem">3rd Year 1st Sem</option>
                                                <option value="3rd Year 2nd Sem">3rd Year 2nd Sem</option>
                                                <option value="4th Year 1st Sem">4th Year 1st Sem</option>
                                                <option value="4th Year 2nd Sem">4th Year 2nd Sem</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-12 col-sm-5">
                                            <label>Unit Lecturer</label>
                                            <select ng-model="lecturer" class="form-control validate" name="lecturer"
                                                id="lecturer" placeholder="Lecturer" required>
                                                <option ng-repeat="s in users | filter: 'Lecturer'" value="{{s._id}}">
                                                    {{s.fname}} {{s.lname}}</option>
                                            </select>
                                        </div>
                                        <div class="col-12 col-sm-7">
                                            <label>Unit Status</label>
                                            <select ng-model="status" class="form-control validate" name="status"
                                                id="status" placeholder="Course Status" required>
                                                <option value="" selected="" disabled>Course Status</option>
                                                <option value="1">Active</option>
                                                <option value="0">Suspended</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-check form-check-info text-left pt-4">
                                        <input ng-model="flexCheckDefault" name="flexCheckDefault"
                                            class="form-check-input" type="checkbox" id="flexCheckDefault" required>
                                        <label class="form-check-label" for="flexCheckDefault">
                                            I agree the <a href="javascrpt:;" class="text-dark font-weight-bolder">Terms
                                                and Conditions</a>
                                        </label>
                                    </div>
                                    <div class="button-row mt-4">
                                        <button ng-click="saveUnit()"
                                            ng-disabled="unitForm.code.$invalid || unitForm.name.$invalid || unitForm.course.$invalid  || unitForm.session.$invalid || unitForm.lecturer.$invalid  || unitForm.status.$invalid || unitForm.flexCheckDefault.$invalid"
                                            id="btn-saveUnit" class="btn bg-gradient-primary ms-auto mb-0"
                                            type="submit">Submit</button>
                                    </div>
                                </form>
                            </div>
                            <div class="card-footer text-center pt-0 px-sm-4 px-1">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <%- include("./partials/footer.ejs") %>

            <script>
                if (document.getElementById('type')) {
                    var element = document.getElementById('type');
                    const example = new Choices(element, {});
                }
                if (document.getElementById('session')) {
                    var element = document.getElementById('session');
                    const example = new Choices(element, {});
                }
                if (document.getElementById('status')) {
                    var element = document.getElementById('status');
                    const example = new Choices(element, {});
                }
            </script>